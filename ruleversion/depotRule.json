{
    "title": "总仓库",
    "author": "Reborn",
    "version": 36,
    "updateText": "总仓库迁移至V2版(总仓库名不变)，‘‘迁移后改版本停更’’\n若需要保留该V1版可以自行提高一个版本号以屏蔽更新",
    "rule": "rule://5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya6aaW6aG16aKR6YGT77yMUmVib3Ju77+laG9tZV9ydWxl77+leyJmaXJzdEhlYWRlciI6ImNsYXNzIiwidGl0bGUiOiLmgLvku5PlupMiLCJhdXRob3IiOiJSZWJvcm4iLCJ1cmwiOiJoaWtlcjovL2hvbWUiLCJ2ZXJzaW9uIjoxNSwiY29sX3R5cGUiOiJpY29uXzIiLCJjbGFzc19uYW1lIjoiIiwiY2xhc3NfdXJsIjoiIiwiYXJlYV9uYW1lIjoiIiwiYXJlYV91cmwiOiIiLCJ5ZWFyX25hbWUiOiIiLCJ5ZWFyX3VybCI6IiIsImZpbmRfcnVsZSI6ImpzOlxudmFyIHJlcyA9IHt9O1xudmFyIGQgPSBbXTtcbnZhciBtUnVsZSA9IEpTT04ucGFyc2UoZ2V0UnVsZSgpKTtcblxuLy8g5Zyo6L+Z6YeM5re75Yqg5LuT5bqT6YWN572u77yM5Y+v5L2/5pys5Zyw5re75Yqg55qE5LuT5bqT572u6aG2XG52YXIgYXV0aG9yTGlzdCA9IFtcbiAgICAgXCJb5L6L5a2QXee9rumhtuengeS6uuS7k+W6k0BAUmVib3JuXzBAQEhpa2VyUnVsZXNQcml2YWN5QEBhY2Nlc3NfdG9rZW49JyoqKionXCIsXG4gICAgIFwiW+S+i+WtkF3oh6rlrprkuYnmlofku7blkI1AQFJlYm9ybl8wQEBIaWtlclJ1bGVzRGVwb3RAQHJlbW90ZUZpbGVuYW1lPSd1cGRhdGVfMS5qc29uJ1wiXG5dO1xudmFyIHJlbW90ZUF1dGhvckxpc3RVcmwgPSBcImh0dHBzOi8vZ2l0ZWUuY29tL3FpdXN1bnNoaW5lMjMzL2hpa2VyVmlldy9yYXcvbWFzdGVyL3J1bGV2ZXJzaW9uL2F1dGhvckxpc3QuanNvblwiO1xudmFyIHJlbW90ZUF1dGhvckxpc3QgPSBbXTtcbmV2YWwoXCJyZW1vdGVBdXRob3JMaXN0PVwiICsgZmV0Y2gocmVtb3RlQXV0aG9yTGlzdFVybCwge30pKTtcbkFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGF1dGhvckxpc3QsIHJlbW90ZUF1dGhvckxpc3QpO1xuLy8g5Zyo6L+Z6YeM5re75Yqg5LuT5bqT6YWN572u77yM5Y+v5L2/5pys5Zyw5re75Yqg55qE5LuT5bqT572u5bqVXG52YXIgYXV0aG9yTGlzdEJvdHRvbSA9IFtcbiAgICBcIlvkvovlrZBd572u5bqV5pys5Zyw5LuT5bqTQEBSZWJvcm5fMEBASGlrZXJSdWxlc1ByaXZhY3lcIlxuXTtcbmlmIChhdXRob3JMaXN0Qm90dG9tLmxlbmd0aCAhPSAwKSBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhdXRob3JMaXN0LCBhdXRob3JMaXN0Qm90dG9tKTtcblxuLy8g5Zyo6L+Z6YeM5re75Yqg6ZqP5py65aS05YOPXG52YXIgcGljVXJsTGlzdCA9IFtcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2MjQmc2l6ZT0xMjhcIixcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2NDcmc2l6ZT0xMjhcIixcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNjY1MzYmc2l6ZT0xMjhcIixcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2NTUmc2l6ZT0xMjhcIixcbl07XG5cbi8vIOmakOiXj+W8gOWFs++8jOS4jemcgOimgemakOiXj+ivt+iuvue9ruS4umZhbHNlXG52YXIgbmVlZEhpZGVSdWxlID0gdHJ1ZTtcbi8vIOiHquihjOa3u+WKoOimgemakOiXj+eahOagh+iusO+8jOagvOW8j+S4uu+8mlvmoIforrDlkI1dXG52YXIgaGlkZVN5bWJvbHMgPSBbXCJb5qih5p2/XVwiLCBcIlvmnKrlrozmiJBdXCJdO1xuXG4vLyDmiormgLvku5PlupPnirbmgIHlhpnlhaXmlofku7ZcbmZ1bmN0aW9uIHdyaXRlRGVwb3RTdGF0dXNUb0ZpbGUgKGRlcG90U3RhdHVzKSB7XG4gICAgd3JpdGVGaWxlKFwiaGlrZXI6Ly9maWxlcy9kZXBvdFN0YXR1cy5qc29uXCIsIEpTT04uc3RyaW5naWZ5KGRlcG90U3RhdHVzKSk7XG59XG4vLyDoi6XkuI3mmK/nrKzkuIDmrKHkvb/nlKjmgLvku5PlupPliJnpmpDol4/lvIDlj5HmlofmoaNcbnZhciBkZXBvdFN0YXR1cyA9IHt9OyBcbnZhciBkZXBvdFN0YXR1c0ZpbGUgPSAgZmV0Y2goXCJoaWtlcjovL2ZpbGVzL2RlcG90U3RhdHVzLmpzb25cIiwge30pO1xuaWYgKGRlcG90U3RhdHVzRmlsZSAhPSBcIlwiKSB7IFxuICAgIGV2YWwoXCJkZXBvdFN0YXR1cz1cIitkZXBvdFN0YXR1c0ZpbGUpO1xufVxuLy8g6Iul6ZyA6KaB5rC45LmF5pi+56S65byA5Y+R5paH5qGj77yM5YiZ5Y+W5raI5rOo6YeKXG4vLyBkZXBvdFN0YXR1cy5zaG93RGV2RG9jID0gdHJ1ZTtcblxuLy8g6Iul6ZyA6KaB5rC45LmF5pi+56S65L6L5a2Q77yM5YiZ5Y+W5raI5rOo6YeKXG4vLyBkZXBvdFN0YXR1cy5zaG93RXRjID0gdHJ1ZTtcbmlmIChkZXBvdFN0YXR1cy5zaG93RXRjICE9IGZhbHNlIHx8ICAgbVJ1bGUudmVyc2lvbiAhPSBkZXBvdFN0YXR1cy52ZXJzaW9uKSB7XG4gICAgZGVwb3RTdGF0dXMuc2hvd0V0YyA9IGZhbHNlO1xuICAgIGRlcG90U3RhdHVzLnZlcnNpb24gPSBtUnVsZS52ZXJzaW9uO1xuICAgIHdyaXRlRGVwb3RTdGF0dXNUb0ZpbGUoZGVwb3RTdGF0dXMpO1xufSBlbHNlIHtcbiAgICBoaWRlU3ltYm9scy5wdXNoKFwiW+S+i+WtkF1cIik7XG59XG4vLyBzZXRFcnJvcihKU09OLnBhcnNlKGdldFJ1bGUoKSkudmVyc2lvbiAhPSBkZXBvdFN0YXR1cy52ZXJzaW9uKTtcblxuZnVuY3Rpb24gaXNIaWRlUnVsZSAocnVsZVRpdGxlKSB7XG4gICAgaWYgKG5lZWRIaWRlUnVsZSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gaWYgKGhpZGVTeW1ib2xzLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHJ1bGVUZW1wID0gcnVsZVRpdGxlO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBoaWRlU3ltYm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocnVsZVRlbXAuaW5kZXhPZihoaWRlU3ltYm9sc1tpXSkgIT0gLTEpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmQucHVzaCh7XG4gICAgdGl0bGU6IFwi5qyi6L+O5p2l5Yiw6KeG55WM5oC75LuT5bqTXCIsXG4gICAgZGVzYzogXCLlnKjov5nph4zvvIzkvaDlj6/ku6XnlYXmuLjlkITkuKrlpKfkvaznmoTop4TliJnvvIzlv6vpgJ/mtY/op4jlv6vpgJ/lr7zlhaVcIixcbiAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbn0pO1xuXG5pZiAoZGVwb3RTdGF0dXMuc2hvd1RpcHMgIT0gZmFsc2UpIHtcbmQucHVzaCh7XG4gICAgdGl0bGU6IFwi6aaW5qyh5a+85YWl5o+Q56S6XCIsXG4gICAgZGVzYzogXCLigJjigJjmnKzmrKHmj5DnpLrlj6rmmL7npLrkuIDmrKHvvIzliLfmlrDljbPmtojlpLHigJnigJlcXG7op4TliJnph4zmnInlpb3lpJrpmpDol4/nmoTlvIDlhbPllYrvvIFcXG7lpKflrrbkuI3pnIDopoHmmL7npLrku4DkuYjnmoTpg73lj6/ku6XljrvphY3nva7lhbPmjonllYrvvIFcIixcbiAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbn0pO1xuZGVwb3RTdGF0dXMuc2hvd1RpcHMgPSBmYWxzZTtcbndyaXRlRGVwb3RTdGF0dXNUb0ZpbGUoZGVwb3RTdGF0dXMpO1xufVxuXG5pZiAoZGVwb3RTdGF0dXMuc2hvd0RldkRvYyAhPSBmYWxzZSkge1xuZC5wdXNoKHtcbiAgICB0aXRsZTogXCLjgJDlpKfkvazpgJrpgZPjgJFcIixcbiAgICBkZXNjOiBcIuKAmOKAmOeCueWHu+afpeeci1Yy5oC75LuT5bqT5byA5Y+R5paH5qGj4oCZ4oCZXFxu5rOo5oSP6K+l5o+Q56S65Y+q5pi+56S65LiA5qyhXFxu6KeE5YiZ6YeM5pyJ5rC45LmF5pi+56S65byA5YWz5Y+v5Lul6Ieq5bex5Y675byAXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vZ2l0ZWUuY29tL1JlYm9ybl8wL0hpa2VyUnVsZXNEZXBvdC9ibG9iL21hc3Rlci9SRUFETUUubWQjZG9jdW1lbnQ9aHR0cHM6Ly9naXRlZS5jb20vUmVib3JuXzAvSGlrZXJSdWxlc0RlcG90L2Jsb2IvbWFzdGVyL1JFQURNRS5tZFwiLFxuICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxufSk7XG5kZXBvdFN0YXR1cy5zaG93RGV2RG9jID0gZmFsc2U7XG53cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKTtcbn1cblxudmFyIGRlc2MgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICByZXR1cm4gcnVsZS5vbGRWZXJzaW9uICE9IG51bGwgJiYgcnVsZS5vbGRWZXJzaW9uIDwgcnVsZS52ZXJzaW9uID8gKFwi4oCY4oCY5pyJ5paw54mI5pys77yaXCIgKyBydWxlLnZlcnNpb24gKyBcIuKAmeKAme+8jOeCueWHu+WvvOWFpeaWsOeJiOacrFwiKSA6IHJ1bGUub2xkVmVyc2lvbiA+IHJ1bGUudmVyc2lvbiA/IFwi4oCY4oCY5Za177yf5Li65ZWl5L2g55qE6KeE5YiZ54mI5pys5q+U5oiR6L+Y6auY77yf4oCZ4oCZXCIgOiBcIuW9k+WJjeinhOWImeW3suaYr+acgOaWsOeJiO+8jOeCueWHu+i3s+WIsOinhOWImemhtVwiO1xufTtcblxuLy8g5Li65omA5pyJ5YiG57G75re75Yqg5oC75LuT5bqT6aG5XG50cnl7XG52YXIgcmVtb3RlRGVwb3RSdWxlVXJsID0gXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvcmF3L21hc3Rlci9ydWxldmVyc2lvbi9kZXBvdFJ1bGVfdjJfcmVsZWFzZS5qc29uXCJcbnZhciByZW1vdGVEZXBvdFJ1bGUgPSB7fTtcbmV2YWwoXCJyZW1vdGVEZXBvdFJ1bGU9XCIgKyBmZXRjaChyZW1vdGVEZXBvdFJ1bGVVcmwsIHt9KSk7XG52YXIgbG9jYWxEZXBvdFJ1bGUgPSBKU09OLnBhcnNlKGdldFJ1bGUoKSk7XG5yZW1vdGVEZXBvdFJ1bGUub2xkVmVyc2lvbiA9IGxvY2FsRGVwb3RSdWxlLnZlcnNpb247XG4vL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KGxvY2FsRGVwb3RSdWxlKSk7XG4vL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KHJlbW90ZURlcG90UnVsZSkpO1xuaWYgKHJlbW90ZURlcG90UnVsZS5vbGRWZXJzaW9uIDwgcmVtb3RlRGVwb3RSdWxlLnZlcnNpb24pIHtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogcmVtb3RlRGVwb3RSdWxlLnRpdGxlICsgXCJcXHRcIiArIGRlc2MocmVtb3RlRGVwb3RSdWxlKSxcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vYmFpZHUuY29tI1wiICsgSlNPTi5zdHJpbmdpZnkocmVtb3RlRGVwb3RSdWxlKSAgfHwgXCJcIixcbiAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiLFxuICAgICAgICAvL2NvbnRlbnQ6IHJlbW90ZURlcG90UnVsZS51cGRhdGVUZXh0LFxuICAgICAgICBkZXNjOiBcIuOAkOabtOaWsOaXpeW/l+OAkVxcbuabtOWkmuWujOaVtOaXpeW/l+ivt+WcqOmHjOmdoueCueWHu+i/m+WFpeWOn+e9kemhteafpeeci1wiXG4gICAgfSk7XG59IGVsc2Uge1xuICAgIGRbMF0uZGVzYyA9IFwi4oCY4oCY54K55Ye75Y+v5p+l55yL5pu05paw5pel5b+X4oCZ4oCZPGJyPlwiICsgZFswXS5kZXNjO1xuICAgIGRbMF0udXJsID0gXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvYmxvYi9tYXN0ZXIvcnVsZXZlcnNpb24vQ0hBTkdFTE9HX0RFUE9UUlVMRV9WMi5tZCN1cGRhdGVUZXh0PVwiICsgcmVtb3RlRGVwb3RSdWxlLnVwZGF0ZVRleHRcbn1cbn0gY2F0Y2ggKGUpIHtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLigJjigJjmgLvku5PlupPmm7TmlrDnqIvluo/lt7LmjZ/lnY/igJnigJlcIixcbiAgICAgICAgZGVzYzogXCLor7fogZTns7sgUmVib3JuIOS/ruWkjVwiLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCIsXG4gICAgfSk7XG59XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgYXV0aG9yTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICBpZiAoaXNIaWRlUnVsZShhdXRob3JMaXN0W2ldKSkge1xuICAgICAgICAgIGF1dGhvckxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIHBpY1VybCA9IG51bGw7XG4gICAgdmFyIHBpY1VybEpTID0gYXV0aG9yTGlzdFtpXS5tYXRjaCgvcGljVXJsPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG4gICAgZXZhbChwaWNVcmxKUyk7XG4gICAgaWYgKHBpY1VybCA9PSBudWxsKSBwaWNVcmwgPSBwaWNVcmxMaXN0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpwaWNVcmxMaXN0Lmxlbmd0aCldO1xuICAgIC8vIHNldEVycm9yKHBpY1VybClcbiAgICBkLnB1c2goe1xuICAgICAgICAgdGl0bGU6IGF1dGhvckxpc3RbaV0uc3BsaXQoXCJAQFwiKVswXSxcbiAgICAgICAgIHVybDogXCJodHRwczovL2JhaWR1LmNvbSNcIiArIGF1dGhvckxpc3RbaV0sXG4gICAgICAgICBwaWNfdXJsOiBwaWNVcmxcbiAgICB9KTtcbn1cblxuLy8gc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkoZCkpO1xucmVzLmRhdGEgPSBkO1xuc2V0SG9tZVJlc3VsdChyZXMpOyIsInNlYXJjaF91cmwiOiIiLCJ0aXRsZUNvbG9yIjoiI2ZmZjIwYzAwIiwiZ3JvdXAiOiIj77iP4oOj6aaW6aG1Iiwic2VhcmNoRmluZCI6IiIsImRldGFpbF9jb2xfdHlwZSI6InRleHRfMSIsImRldGFpbF9maW5kX3J1bGUiOiJqczpcbnZhciByZXMgPSB7fTtcbnZhciBkID0gW107XG5cbi8vIOiuvue9riB0cnVlIOS4gOmUruWHgOWMlu+8jOmZpOS6huinhOWImeWSjOS7k+W6k+mAmuefpe+8jOWVpeS5n+S4jeimgVxudmFyIGhpZGVBbGwgPSBmYWxzZTtcblxuLy8g5YWl5oiP5byA5YWz77yf77yI5ruR56i977yJLy8g5Yig6Zmk5byA5YWz77yM5LiN6ZyA6KaB5Yig6Zmk6K+36K6+572u5Li6ZmFsc2VcbnZhciBuZWVkRGVsU3ltYm9sID0gdHJ1ZTtcbi8vIOiHquihjOa3u+WKoOimgeiiq+WIoOaOieeahOagh+iusFxudmFyIHN5bWJvbHMgPSBbXCLmoIforrAxXCIsXCLmoIforrAyXCJdO1xuXG4vLyDpmpDol4/lvIDlhbPvvIzkuI3pnIDopoHpmpDol4/or7forr7nva7kuLpmYWxzZVxudmFyIG5lZWRIaWRlUnVsZSA9IHRydWU7XG4vLyDoh6rooYzmt7vliqDopoHpmpDol4/nmoTmoIforrDvvIzmoLzlvI/kuLrvvJpb5qCH6K6w5ZCNXVxudmFyIGhpZGVTeW1ib2xzID0gW1wiW+aooeadv11cIiwgXCJb5pyq5a6M5oiQXVwiXTtcblxuLy8g5piv5ZCm6ZqQ6JeP5L6L5a2Q77yM6ZyA6KaB6ZqQ6JeP6K+36K6+572u5Li6dHJ1ZVxudmFyIG5lZWRIaWRlRXRjID0gZmFsc2U7XG5pZiAobmVlZEhpZGVFdGMgPT0gdHJ1ZSkgaGlkZVN5bWJvbHMucHVzaChcIlvkvovlrZBdXCIpO1xuXG4vLyDlsI/ku5PlupPmoIfpopjlvIDlhbPvvIjms6jmhI/kuovpobnkuIrpnaLpgqPkuKrvvInvvIzkuI3pnIDopoHmmL7npLror7forr7nva7kuLp0cnVlXG52YXIgbm9UaXRsZSA9IGZhbHNlO1xuLy8g5rOo5oSP5LqL6aG55byA5YWz77yM5LiN6ZyA6KaB5pi+56S66K+36K6+572u5Li6dHJ1ZVxudmFyIG5vV2FybmluZyA9IGZhbHNlO1xuXG4vKipcbiAqIOWPr+WcqOatpOWkhOiHquWumuS5ieS7k+W6k++8jOWunueOsOengeS6uuS7k+W6k1xuICpcbiAqIOS7pVJlYm9ybuS7k+W6k+eahOmTvuaOpeS4uuWPguiAg1xuICpcbiAqIGh0dHBzOi8vZ2l0ZWUuY29tL1JlYm9ybl8wL0hpa2VyUnVsZXNEZXBvdC9ibG9iL21hc3Rlci91cGRhdGUuanNvblxuICovXG52YXIgYXV0aG9yTGlzdCA9IGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXTtcbnZhciBhdXRob3JBbmRPd25lckFuZFByb2plY3QgPSBhdXRob3JMaXN0LnNwbGl0KFwiQEBcIik7XG52YXIgcmVtb3RlQXBpSG9tZSA9IFwiaHR0cHM6Ly9naXRlZS5jb20vYXBpL3Y1L3JlcG9zL1wiO1xudmFyIG93bmVyID0gYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0WzFdOyAgIC8vIOS7k+W6k+aLpeacieiAhVxudmFyIHJlcG8gPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMl07IC8vIOS7k+W6k+WQjVxudmFyIGF1dGhvciA9IGF1dGhvckFuZE93bmVyQW5kUHJvamVjdFswXTtcbnZhciByZW1vdGVGaWxlbmFtZSA9IG51bGw7IC8vIOaWh+S7tuWQjVxudmFyIHBhdGggPSByZW1vdGVGaWxlbmFtZTsgIC8vIOWcqOS7k+W6k+S4reaWh+S7tueahOi3r+W+hFxudmFyIGFjY2Vzc190b2tlbiA9IG51bGw7ICAvLyDnlKjmiLfmjojmnYPnoIHvvIzlnKjnoIHkupFcIuiuvue9ruKAlD7lronlhajorr7lrpotPuS4quS6uuiuv+mXruS7pOeJjFwi5Lit5Y+v5Lul55Sf5oiQXG52YXIgdG9rZW5KUyA9IGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXS5tYXRjaCgvYWNjZXNzX3Rva2VuPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG5ldmFsKHRva2VuSlMpOyAgXG4vLyBzZXRFcnJvcihhY2Nlc3NfdG9rZW49PW51bGwpO1xuXG52YXIgcmVtb3RlRmlsZW5hbWVKUyA9IGF1dGhvckxpc3QubWF0Y2goL3JlbW90ZUZpbGVuYW1lPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG5ldmFsKHJlbW90ZUZpbGVuYW1lSlMpO1xuaWYgKHJlbW90ZUZpbGVuYW1lID09IG51bGwpIHJlbW90ZUZpbGVuYW1lID0gXCJ1cGRhdGUuanNvblwiO1xucGF0aCA9IHJlbW90ZUZpbGVuYW1lO1xuLy8gc2V0RXJyb3IocmVtb3RlRmlsZW5hbWUpXG5cbi8qKlxuICog77yB77yB77yB5bu66K6u5Zyo5q2k5aSE6YWN572u56eB5Lq65LuT5bqT77yB77yB77yBXG4gKlxuICog5Li65LqG5LiN5b2x5ZON5Y6f5LuT5bqT5Y+v5Lul5Zyo6L+Z6YeM6K6+572u6Ieq5bex55qE5LuT5bqT6YWN572u77yM5Li+5L6L77yaXG4gKlxuICog6ZO+5o6l5Y+C6ICD77yaaHR0cHM6Ly9naXRlZS5jb20vUmVib3JuXzAvSGlrZXJSdWxlc1ByaXZhY3kvYmxvYi9tYXN0ZXIvdXBkYXRlLmpzb25cbiAqL1xuLypcbm93bmVyID0gXCJSZWJvcm5fMFwiO1xucmVwbyA9IFwiSGlrZXJSdWxlc1ByaXZhY3lcIjtcbnBhdGggPSBcInVwZGF0ZS5qc29uXCI7XG5hY2Nlc3NfdG9rZW4gPSBcIioqKioqKioqKipcIjtcbi8vIGF1dGhvciA9IFwiUmVib3JuXCI7ICAvLyDoi6XmiYDmnInop4TliJlhdXRob3Lpg73mmK/lkIzkuIDkuKrliJnlnKjmraTlpITlm7rlrprkuIDkuKrljbPlj6/vvIznhLblkI7liIbnsbvlj6/ku6XmuIXnqbrvvIzms6jmhI/liKDpmaQgc3BsaXTvvIzkuI3nhLbkvJrmiqXplJnvvJvlkKbliJnor7fms6jmhI/loavlpb3liIbnsbvvvIzkuI3nhLbmsqHms5Xmo4DmtYvmm7TmlrBcbiovXG5cbmlmIChnZXRVcmwoKS5pbmRleE9mKFwicnVsZTovL1wiKSAhPSAtMSkge1xuICAgIHZhciByZW1vdGVEZXBvdFJ1bGUgPSBKU09OLnBhcnNlKGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgIHRpdGxlOiBcIuabtOaWsOaXpeW/lyAo54K55Ye75Y+v5p+l55yL5a6M5pW05pel5b+XKVwiLFxuICAgICAgICAgZGVzYzogcmVtb3RlRGVwb3RSdWxlLnVwZGF0ZVRleHQsXG4gICAgICAgICB1cmw6IFwiaHR0cHM6Ly9naXRlZS5jb20vcWl1c3Vuc2hpbmUyMzMvaGlrZXJWaWV3L2Jsb2IvbWFzdGVyL3J1bGV2ZXJzaW9uL0NIQU5HRUxPR19ERVBPVFJVTEVfVjIubWRcIixcbiAgICAgICAgIGNvbF90eXBlOiBcInBpY18xXCJcbiAgICB9KTtcbiAgICBkLnB1c2goe1xuICAgICAgICAgdGl0bGU6IFwi54K55Ye75pu05paw5oC75LuT5bqTXCIsXG4gICAgICAgICB1cmw6IHJlbW90ZURlcG90UnVsZS5ydWxlLFxuICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiIFxuICAgIH0pO1xufSBlbHNlIGlmIChnZXRVcmwoKS5pbmRleE9mKFwidXBkYXRlVGV4dD1cIikgIT0gLTEpIHtcbiAgICB2YXIgdXBkYXRlVGV4dCA9IG51bGw7XG4gICAgLy8gdXBkYXRlVGV4dEpTID0gXCJ1cGRhdGVUZXh0PSdcIiArIGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXS5yZXBsYWNlKFwidXBkYXRlVGV4dD1cIiwgXCJcIikgKyBcIic7XCI7XG4gICAgLy8gZXZhbCh1cGRhdGVUZXh0SlMpO1xuICAgIHVwZGF0ZVRleHQgPSBnZXRVcmwoKS5zcGxpdChcIiNcIilbMV0ucmVwbGFjZShcInVwZGF0ZVRleHQ9XCIsIFwiXCIpO1xuICAgIGQucHVzaCh7XG4gICAgICAgICB0aXRsZTogXCLmm7TmlrDml6Xlv5cgKOeCueWHu+WPr+afpeeci+WujOaVtOaXpeW/lylcIixcbiAgICAgICAgIGRlc2M6IHVwZGF0ZVRleHQgIT0gbnVsbCA/IHVwZGF0ZVRleHQgOiBcIuaaguaXoOabtOaWsOaXpeW/l1wiLFxuICAgICAgICAgdXJsOiBcImh0dHBzOi8vZ2l0ZWUuY29tL3FpdXN1bnNoaW5lMjMzL2hpa2VyVmlldy9ibG9iL21hc3Rlci9ydWxldmVyc2lvbi9DSEFOR0VMT0dfREVQT1RSVUxFX1YyLm1kXCIsXG4gICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgfSk7XG59IGVsc2UgaWYgKGdldFVybCgpLmluZGV4T2YoXCJkb2N1bWVudD1cIikgIT0gLTEpIHtcbiAgICB2YXIgZG9jdW1lbnRVcmwgPSBudWxsO1xuICAgIGRvY3VtZW50VXJsID0gZ2V0VXJsKCkuc3BsaXQoXCIjXCIpWzFdLnJlcGxhY2UoXCJkb2N1bWVudD1cIiwgXCJcIik7XG4gICBkLnB1c2goe1xuICAgICAgICAgdGl0bGU6IFwi5oC75LuT5bqT5byA5Y+R5paH5qGj5YWl5Y+jXCIsXG4gICAgICAgICBkZXNjOiBcIui/meaYr+S4k+mXqOe7meWkp+S9rOS7rOWGmeeahO+8jOaWh+eslOWkquW3ruS6hu+8jOinieW+l+WGmeW+l+S5sei/mOivt+S9k+iwheS4gOS4i/CfmYjjgILmnInkuI3mh4LnmoTlnLDmlrnlj6/ku6XogZTns7vmiJHvvIzmupzkuobmupzkuobvvZ5cIixcbiAgICAgICAgIHVybDogZG9jdW1lbnRVcmwsXG4gICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgfSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgIHRpdGxlOiBcIueCueWHu+WPr+afpeeci+WujOaVtOaWh+aho1wiLFxuICAgICAgICAgdXJsOiBkb2N1bWVudFVybCxcbiAgICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgIH0pO1xufSBlbHNlIHtcblxuLy8gQVBJ6ZO+5o6l5Y+C6ICD77yaaHR0cHM6Ly9naXRlZS5jb20vYXBpL3Y1L3JlcG9zL3t7b3duZXJ9fS97e3JlcG99fS9jb250ZW50cy97e3BhdGh9fT9hY2Nlc3NfdG9rZW49KioqKlxudmFyIHJlbW90ZVVybCA9IHJlbW90ZUFwaUhvbWUgKyBvd25lciArIFwiL1wiICsgcmVwbyArIFwiL2NvbnRlbnRzL1wiICsgcGF0aDtcbmlmIChhY2Nlc3NfdG9rZW4gIT0gbnVsbCkge1xuICAgIHJlbW90ZVVybCA9IHJlbW90ZVVybCArIFwiP2FjY2Vzc190b2tlbj1cIiArYWNjZXNzX3Rva2VuO1xufVxuLy8gc2V0RXJyb3IocmVtb3RlVXJsKTtcbnZhciByZW1vdGVIb21lID0gXCJodHRwczovL2dpdGVlLmNvbS9cIiArIG93bmVyICsgXCIvXCIgKyByZXBvICsgXCIvYmxvYi9tYXN0ZXIvdXBkYXRlLmpzb25cIlxuXG5mdW5jdGlvbiBnZXRSdWxlTm9TeW1ib2xzKHJ1bGUsIHN5bWJvbExpc3QpIHtcbiAgICBpZiAobmVlZERlbFN5bWJvbCAhPSB0cnVlKSByZXR1cm4gcnVsZTtcbiAgICB2YXIgcnVsZVRlbXAgPSBydWxlO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzeW1ib2xMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzeW1ib2xSZWcgPSBuZXcgUmVnRXhwKHN5bWJvbExpc3RbaV0sIFwiZ1wiKTtcbiAgICAgICAgcnVsZVRlbXAudGl0bGUgPSBydWxlVGVtcC50aXRsZS5yZXBsYWNlKHN5bWJvbFJlZywgXCJcIik7XG4gICAgfVxuLy9zZXRFcnJvcihKU09OLnN0cmluZ2lmeShydWxlVGVtcCkpO1xuICAgIHJldHVybiBydWxlVGVtcDtcbn1cblxuZnVuY3Rpb24gaXNIaWRlUnVsZSAocnVsZSkge1xuICAgIGlmIChuZWVkSGlkZVJ1bGUgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGlmIChoaWRlU3ltYm9scy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBydWxlVGVtcCA9IHJ1bGU7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGhpZGVTeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChydWxlVGVtcC50aXRsZS5pbmRleE9mKGhpZGVTeW1ib2xzW2ldKSAhPSAtMSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxudmFyIHJ1bGVzID0gW107XG5ldmFsKFwicnVsZXM9XCIgKyBmZXRjaChcImhpa2VyOi8vaG9tZVwiLCB7fSkpO1xudmFyIG15UnVsZXMgPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcnVsZSA9IHJ1bGVzW2ldO1xuICAgIGlmIChydWxlLmF1dGhvciA9PSBhdXRob3IpIHtcbiAgICAgICAgbXlSdWxlcy5wdXNoKGdldFJ1bGVOb1N5bWJvbHMocnVsZSwgc3ltYm9scykpO1xuICAgIH1cbn1cbi8vIHNldEVycm9yKEpTT04uc3RyaW5naWZ5KG15UnVsZXMpKTtcblxuLy8g5aaC5p6c5pys5Zyw5rKh5pyJ5YiZ5o+Q56S65a+85YWl5paw6KeE5YiZXG4vLyDlm6Dpg6jliIbmiYvmnLrkuI3mlK/mjIFlczbor63ms5XvvIzmlYXms6jph4rmjolcbi8qdmFyIG15UnVsZXNNYXAgPSBuZXcgTWFwKCk7XG5teVJ1bGVzLm1hcChydWxlPT57XG5teVJ1bGVzTWFwLnNldChydWxlLnRpdGxlLCB0cnVlKTtcbn0pO1xuLy9zZXRFcnJvcihteVJ1bGVzTWFwLmdldChcIuiFvuiur+KAolJlXCIpKTsqL1xuLy8g5Y6f5aeL5pa55rOV77yM5q+U6L6D6ICX5pe2XG5mdW5jdGlvbiBpc0luQXJyYXkocnVsZXMsIHRpdGxlKSB7XG4gICAgaWYgKHJ1bGVzLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocnVsZXNbaV0udGl0bGUgPT0gdGl0bGUpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG52YXIgZGVzYyA9IGZ1bmN0aW9uIChydWxlcywgcnVsZSkge1xuICAgIGlmIChpc0luQXJyYXkocnVsZXMsIHJ1bGUudGl0bGUpID09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHJ1bGUub2xkVmVyc2lvbiAhPSBudWxsICYmIHJ1bGUub2xkVmVyc2lvbiA8IHJ1bGUudmVyc2lvbiA/IChcIuKAmOKAmOacieaWsOeJiOacrO+8mlwiICsgcnVsZS52ZXJzaW9uICsgXCLigJnigJnvvIzngrnlh7vlr7zlhaXmlrDniYjmnKxcIikgKyAgKFwiPGJyPjxicj5b5pu05paw5pel5b+XXSBcIiArKHJ1bGUudXBkYXRlVGV4dCA9PW51bGwgPyBcIuaXoFwiOiBydWxlLnVwZGF0ZVRleHQpICsgKHJ1bGUudGlwcyAhPSBudWxsICYmIHJ1bGUudGlwcyAhPSBcIlwiID8gXCI8YnI+PGJyPlRpcHM6IFwiICsgcnVsZS50aXBzIDogXCJcIikpIDogcnVsZS5vbGRWZXJzaW9uID4gcnVsZS52ZXJzaW9uID8gXCLigJjigJjllrXvvJ/kuLrllaXkvaDnmoTop4TliJnniYjmnKzmr5TmiJHov5jpq5jvvJ/igJnigJlcIiA6IFwi5b2T5YmN6KeE5YiZ5bey5piv5pyA5paw54mI77yM54K55Ye76Lez5Yiw6KeE5YiZ6aG1XCIgKyAocnVsZS50aXBzICE9IG51bGwgJiYgcnVsZS50aXBzICE9IFwiXCIgPyBcIlxcblxcblRpcHM6IFwiICsgcnVsZS50aXBzICA6IFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcIuKAmOKAmOS9oOWwmuacquWvvOWFpeivpeinhOWImeKAmeKAme+8jOeCueWHu+WvvOWFpVwiICsgKHJ1bGUudGlwcyAhPSBudWxsICYmIHJ1bGUudGlwcyAhPSBcIlwiID8gXCI8YnI+PGJyPlRpcHM6IFwiICsgcnVsZS50aXBzIDogXCJcIik7XG4gICAgfVxufTtcblxuaWYgKG5vVGl0bGUgIT0gdHJ1ZSAmJiBoaWRlQWxsICE9IHRydWUpIHtcbmQucHVzaCh7XG4gICAgdGl0bGU6IFwi4oCY4oCY6L+Z6YeM5pivIFwiICsgYXV0aG9yICsgXCIg55qE6KeE5YiZ5bCP5LuT5bqT4oCZ4oCZXCIsXG4gICAgLy8gZGVzYzogXCLngrnlh7vlj6/orr/pl67op4TliJnku5PlupPmupBcIixcbiAgICB1cmw6IHJlbW90ZUhvbWUsXG4gICAgY29sX3R5cGU6IFwidGV4dF8xXCJcbn0pO1xufVxuXG52YXIgcmVtb3RlUnVsZXMgPSBbXTtcbi8vIHZhciByZW1vdGVVcmwgPSByZW1vdGVBcGlIb21lICsgZW5jb2RlVVJJQ29tcG9uZW50KGF1dGhvcikgKyBcIi9cIiArIHJlbW90ZUZpbGVuYW1lO1xudmFyIHJlbW90ZVNvdXJjZSA9IGZldGNoKHJlbW90ZVVybCwge30pO1xuLy8gc2V0RXJyb3IocmVtb3RlVXJsKTtcbnRyeSB7XG4gICAgZXZhbChcInJlbW90ZVNvdXJjZT1cIiArIHJlbW90ZVNvdXJjZSk7XG4gICAgZXZhbChcInJlbW90ZVJ1bGVzPVwiICsgYmFzZTY0RGVjb2RlKHJlbW90ZVNvdXJjZS5jb250ZW50KSk7XG4gICAgaWYgKHJlbW90ZVJ1bGVzLmRhdGEgIT0gbnVsbCkge1xuICAgICAgICAgdmFyIG5vdGljZSA9IHJlbW90ZVJ1bGVzLm5vdGljZTtcbiAgICAgICAgIGlmIChub3RpY2UgIT0gbnVsbCAmJiBub3RpY2UgIT0gXCJcIikge1xuICAgICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuS7k+W6k+mAmuefpVwiLFxuICAgICAgICAgICAgICAgICAgIGRlc2M6IG5vdGljZSxcbiAgICAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgfVxuICAgICAgICAgcmVtb3RlUnVsZXMgPSByZW1vdGVSdWxlcy5kYXRhO1xuICAgIH1cbmlmIChub1dhcm5pbmcgIT0gdHJ1ZSAmJiBoaWRlQWxsICE9IHRydWUpIHtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLms6jmhI/kuovpoblcIixcbiAgICAgICAgZGVzYzogXCIxLiDkv53lrZjlkI7pnIDopoHmiYvliqjkuIvmi4nliLfmlrDmiY3og73mm7TmlrDop4TliJnnirbmgIFcXG4yLiDoi6XmmK/lpLHor6/ngrnlh7vot7Povazlj6/ku6Xngrnlh7vms6jmhI/kuovpobnmgaLlpI3liLDku5PlupPpobVcIixcbiAgICAgICAgY29sX3R5cGU6IFwicGljXzFcIixcbiAgICAgICAgdXJsOiBcImhpa2VyOi8vaG9tZUDmgLvku5PlupNcIlxuICAgIH0pO1xufVxufSBjYXRjaChlKSB7IH1cbi8vc2V0RXJyb3IocmVtb3RlUnVsZXMubGVuZ3RoKTtcbmlmIChyZW1vdGVSdWxlcy5sZW5ndGggPT0gMCkge1xuICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOiBcIuivpei/nOeoi+S7k+W6k+aXoOaVsOaNru+8gVwiLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICB9KTtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLor6Xov5znqIvku5PlupPml6DmlbDmja7vvIFcIixcbiAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgfSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi6K+l6L+c56iL5LuT5bqT5peg5pWw5o2u77yBXCIsXG4gICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgIH0pO1xufSBlbHNlIHtcbiAgICAvL3NldEVycm9yKG15UnVsZXMubGVuZ3RoKTtcbiAgICBpZiAobXlSdWxlcy5sZW5ndGggPj0gcmVtb3RlUnVsZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIOS4jeefpemBk+S8muS4jeS8muaciemXrumimFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG15UnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVtb3RlUnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNIaWRlUnVsZShyZW1vdGVSdWxlc1tqXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZXMuc3BsaWNlKGosIDEpO1xuICAgICAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobXlSdWxlc1tpXS50aXRsZSA9PSByZW1vdGVSdWxlc1tqXS50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlc1tqXS5vbGRWZXJzaW9uID0gbXlSdWxlc1tpXS52ZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2pdLnJ1bGU9bXlSdWxlc1tpXS5ydWxlO1xuICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2pdLmRlc2M9bXlSdWxlc1tpXS5kZXNjO1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlUnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICgoaXNIaWRlUnVsZShyZW1vdGVSdWxlc1tpXSkpKSB7XG4gICAgICAgICAgICAgICAgcmVtb3RlUnVsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXlSdWxlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChteVJ1bGVzW2pdLnRpdGxlID09IHJlbW90ZVJ1bGVzW2ldLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGVzW2ldLm9sZFZlcnNpb24gPSBteVJ1bGVzW2pdLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbaV0ucnVsZT1teVJ1bGVzW2pdLnJ1bGU7XG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbaV0uZGVzYz1teVJ1bGVzW2pdLmRlc2M7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVyZ2VTb3J0KGFycikge1xuICAgICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA8IDIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1pZGRsZSA9IE1hdGguZmxvb3IobGVuIC8gMiksXG4gICAgICAgICAgICBsZWZ0ID0gYXJyLnNsaWNlKDAsIG1pZGRsZSksXG4gICAgICAgICAgICByaWdodCA9IGFyci5zbGljZShtaWRkbGUpO1xuICAgICAgICByZXR1cm4gbWVyZ2UobWVyZ2VTb3J0KGxlZnQpLCBtZXJnZVNvcnQocmlnaHQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtZXJnZShsZWZ0LCByaWdodCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICAgICAgd2hpbGUgKGxlZnQubGVuZ3RoID4gMCAmJiByaWdodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAobGVmdFswXS5vbGRWZXJzaW9uIDwgbGVmdFswXS52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGVmdC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRbMF0ub2xkVmVyc2lvbiA8IHJpZ2h0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVmdFswXS5vbGRWZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsZWZ0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyaWdodFswXS5vbGRWZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGVmdC5zaGlmdCgpKTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChsZWZ0Lmxlbmd0aClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG5cbiAgICAgICAgd2hpbGUgKHJpZ2h0Lmxlbmd0aClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJpZ2h0LnNoaWZ0KCkpO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmVtb3RlUnVsZXMgPSBtZXJnZVNvcnQocmVtb3RlUnVsZXMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVSdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaiA9IHJlbW90ZVJ1bGVzW2ldO1xuICAgICAgICB2YXIgciA9IHt9O1xuICAgICAgICByLmRlc2MgPSBkZXNjKG15UnVsZXMsIGopO1xuICAgICAgICByLnRpdGxlID0gai50aXRsZTtcbiAgICAgICAgci51cmwgPSAgaXNJbkFycmF5KG15UnVsZXMsIGoudGl0bGUpID8oai5vbGRWZXJzaW9uICE9IG51bGwgJiYgai5vbGRWZXJzaW9uIDwgai52ZXJzaW9uID8gKGoucnVsZSB8fCBcIlwiKSA6IChcImhpa2VyOi8vaG9tZUBcIitqLnRpdGxlKSk6ICAoai5ydWxlIHx8IFwiXCIpO1xuICAgICAgICAvL3IuY29udGVudCA9IGoudXBkYXRlVGV4dDtcbiAgICAgICAgZC5wdXNoKHIpO1xuICAgIH1cbn1cbn1cblxucmVzLmRhdGEgPSBkO1xuc2V0SG9tZVJlc3VsdChyZXMpOyIsInNkZXRhaWxfY29sX3R5cGUiOiJtb3ZpZV8xIiwic2RldGFpbF9maW5kX3J1bGUiOiIifQ==" 
}